<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="reportChartFiledMapper">

	<!-- result maps for database table DWPAS_C_COM_KPI_INFO -->
	<resultMap id="reportChartFiledMap" type="reportChartFiled">
		<result property="chartId" column="chart_id" javaType="int"
			jdbcType="INTEGER" />
		<result property="chartType" column="chart_type" javaType="int"
			jdbcType="INTEGER" />
		<result property="reportId" column="report_id" javaType="int"
			jdbcType="INTEGER" />
		<result property="fields" column="fields" javaType="java.lang.String"
			jdbcType="VARCHAR" />
		<result property="xFields" column="xfields" javaType="java.lang.String"
			jdbcType="VARCHAR" />
		<result property="url" column="url" javaType="java.lang.String"
			jdbcType="VARCHAR" />
		<result property="updateId" column="update_id" javaType="int"
			jdbcType="INTEGER" />
		<result property="left" column="POSITION_X" javaType="int"
			jdbcType="INTEGER" />
		<result property="top" column="POSITION_Y" javaType="int"
			jdbcType="INTEGER" />
		<result property="width" column="width" javaType="int"
			jdbcType="INTEGER" />
		<result property="height" column="height" javaType="int"
			jdbcType="INTEGER" />
		<result property="GMT_CREATE" column="GMT_CREATE" />
		<result property="GMT_MODIFIED" column="GMT_MODIFIED" />
		<!-- 汇总类型 -->
		<result property="summaryType" column="SUMMARY_TYPE" javaType="int"
			jdbcType="INTEGER" />
	</resultMap>
	<!-- 查询所有图表的字段 -->
	<select id="getAllReportChart" resultMap="reportChartFiledMap"
		parameterType="java.lang.Integer">
		SELECT * FROM tb_rpt_report_chart WHERE
		report_id = #{reportId}
		AND
		LENGTH(IFNULL(FIELDS, '')) != 0
		AND LENGTH(IFNULL(xfields, '')) != 0;
	</select>
	<!-- 查询某图表已选择字段 -->
	<select id="getIsSelOrNotTableFiled" parameterType="java.lang.Integer"
		resultMap="reportChartFiledMap">
		select * from tb_rpt_report_chart where
		chart_id=#{chartId}
	</select>
	<!-- 根据表和字段名查询字段数据 -->
	<select id="getReportChartDate" parameterType="java.util.HashMap"
		resultType="java.util.HashMap">
		 <![CDATA[
		select ${fileds} from ${tableName}  limit 0,10
		]]>
	</select>
</mapper>