<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.infosmart.mapper.ReportDesignMapper">

	<resultMap type="com.infosmart.po.report.ReportDesign" id="ReportDesignRsMap">
		<id column="report_id" property="reportId" />
		<result column="report_name" property="reportName" />
		<result column="report_sql" property="reportSql" />
		<result column="report_define" property="reportDefine" />
		<result column="remark" property="remark" />
		<result column="data_source_id" property="dataSourceId" />
	</resultMap>
	<!-- 通过数据源ID获取报表 -->
	<select id="listReportByDataSourceId" parameterType="String"
		resultMap="ReportDesignRsMap">
		select * from tb_rpt_design where data_source_id=#{dataSourceId}
	</select>
	<!-- 查询报表定义 -->
	<select id="getReportDesignById" parameterType="int"
		resultMap="ReportDesignRsMap">
		select * from tb_rpt_design where report_id=#{reportId}
	</select>
	<!-- 更新报表定义 -->
	<update id="updateReportDesign" parameterType="com.infosmart.po.report.ReportDesign">
		UPDATE tb_rpt_design
		SET
		report_name =#{reportName,jdbcType=VARCHAR},
		report_define=#{reportDefine,jdbcType=VARCHAR},
		remark =#{remark,jdbcType=VARCHAR}
		WHERE
		report_id =#{reportId}
	</update>
	
	<!-- 更新报表SQL语句 -->
	<update id="updateReportSql" parameterType="com.infosmart.po.report.ReportDesign">
		UPDATE tb_rpt_design SET report_sql=#{reportSql},data_source_id=#{dataSourceId}
		WHERE report_id =#{reportId}
	</update>

</mapper>