<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.infosmart.mapper.DwpasCKpiInfoMapper">
	<sql id="common_sql">
		kpi_code,parent_code,kpi_name,disp_name,kpi_type,is_overall,is_show,show_order,is_average,is_max,is_variation,is_percent,unit,decimal_num,convert_num,convert_type,is_cal_kpi,role_formula,is_use,gmt_create
	</sql>
	<!-- 指标信息记录集 -->
	<resultMap id="DwpasCKpiInfoResultMap" type="DwpasCKpiInfo">
		<!-- WARNING - This element is automatically generated by Apache iBATIS 
			ibator, do not modify. This element was generated on Mon Feb 20 17:20:52 
			CST 2012. -->
		<result column="kpi_code" property="kpiCode" jdbcType="VARCHAR" />
		<result column="parent_code" property="parentCode"
			jdbcType="VARCHAR" />
		<result column="kpi_name" property="kpiName" jdbcType="VARCHAR" />
		<result column="disp_name" property="dispName"
			jdbcType="VARCHAR" />
		<result column="kpi_type" property="kpiType" jdbcType="CHAR" />
		<result column="is_overall" property="isOverall"
			jdbcType="CHAR" />
		<result column="is_show" property="isShow" jdbcType="CHAR" />
		<result column="show_order" property="showOrder"
			jdbcType="DECIMAL" />
		<result column="is_average" property="isAverage"
			jdbcType="CHAR" />
		<result column="is_max" property="isMax" jdbcType="CHAR" />
		<result column="is_variation" property="isVariation"
			jdbcType="CHAR" />
		<result column="is_percent" property="isPercent"
			jdbcType="CHAR" />
		<result column="unit" property="unit" jdbcType="VARCHAR" />
		<result column="decimal_num" property="decimalNum"
			jdbcType="DECIMAL" />
		<result column="convert_num" property="convertNum"
			jdbcType="DECIMAL" />
		<result column="convert_type" property="convertType"
			jdbcType="CHAR" />
		<result column="is_cal_kpi" property="isCalKpi" jdbcType="CHAR" />
		<result column="role_formula" property="roleFormula"
			jdbcType="VARCHAR" />
		<result column="is_use" property="isUse" jdbcType="CHAR" />
		<result column="GMT_CREATE" property="gmtCreate"
			jdbcType="TIMESTAMP" javaType="java.util.Date" />
		<!-- 数据为 0000-00-00 00:00:00　会报错，暂时去掉-->
		<!-- 
			<result column="GMT_MODIFIED" property="gmtModified"
			jdbcType="TIMESTAMP" javaType="java.util.Date" />
		-->
	</resultMap>
	<!-- 根据主键查询指标信息 -->
	<select id="queryOneByKpiCode" resultMap="DwpasCKpiInfoResultMap">
		SELECT
		<include refid="common_sql" />
		FROM dwpas_c_kpi_info
		<trim prefix="WHERE" prefixOverrides="AND|OR">
			kpi_code=#{kpiCode}
		</trim>
	</select>

	<!-- 分页查询指标信息 -->
	<select id="listKpiInfoByPagination" parameterType="DwpasCKpiInfo"
		resultMap="DwpasCKpiInfoResultMap">
		SELECT
		<include refid="common_sql" />
		FROM dwpas_c_kpi_info
		<trim prefix="WHERE" prefixOverrides="AND|OR">
			<if test="kpiCode!=null and kpiCode!=''">
				AND kpi_code like "%"#{kpiCode,jdbcType=VARCHAR}"%"
			</if>
			<if test="kpiName!=null and kpiName!=''">
				AND kpi_name like "%"#{kpiName}"%"
			</if>
			<if test="dispName!=null and dispName!=''">
				AND disp_name like "%"#{dispName}"%"
			</if>
			<if test="kpiType!=null and kpiType!=''">
				AND kpi_type=#{kpiType}
			</if>
			<if test="isOverall!=null and isOverall!=''">
				AND is_overall=#{isOverall}
			</if>
			<!-- 是否显示-->
			<if test="isShow!=null and isShow!=''">
				AND is_show=#{isShow}
			</if>
			<!-- 是否可用 -->
			<if test="isUse!=null and isUse!=''">
				AND is_use=#{isUse}
			</if>
			<!-- 是否计算规则 -->
			<if test="isCalKpi!=null and isCalKpi!=''">
				AND is_cal_kpi=#{isCalKpi}
			</if>
		</trim>
		ORDER BY show_order
	</select>
</mapper>