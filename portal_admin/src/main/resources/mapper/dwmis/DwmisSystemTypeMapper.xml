<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.infosmart.dwmis.SystemParamMapping">

	<resultMap id="DwmisSystemParamTypeResultMap" type="DwmisSystemParamType">
		<result property="typeId" column="type_id" javaType="int"
			jdbcType="INTEGER" />
		<result property="groupId" column="group_id" javaType="int"
			jdbcType="INTEGER" />
		<result property="typeName" column="type_name" javaType="java.lang.String"
			jdbcType="VARCHAR" />
		<result property="detail" column="detail" javaType="java.lang.String"
			jdbcType="VARCHAR" />
	</resultMap>

	<!-- select by groupId -->
	<select id="listSystemParamTypeByGroupId" resultMap="DwmisSystemParamTypeResultMap"
		parameterType="int">
		select type_id,group_id,type_name,detail from
		dwmis_mis_type where
		group_id=#{groupId,jdbcType=INTEGER}
		order by
		type_id asc;
	</select>

	<select id="getSystemParamTypeByTypeId" resultMap="DwmisSystemParamTypeResultMap"
		parameterType="int">
		select type_id ,group_id ,type_name ,detail from
		dwmis_mis_type where
		type_id=#{typeId,jdbcType=INTEGER};
	</select>


	<insert id="insertSystemTypeGroup" parameterType="DwmisSystemParamType">
		insert into
		dwmis_mis_type
		(type_id,group_id,type_name,detail)
		values
		(#{typeId,jdbcType=INTEGER},#{groupId,jdbcType=INTEGER},#{typeName,jdbcType=VARCHAR},#{detail,jdbcType=VARCHAR})
	</insert>

	<update id="updateSystemParamType" parameterType="DwmisSystemParamType">
		update
		dwmis_mis_type
		set group_id=#{groupId,jdbcType=INTEGER},
		type_name=#{typeName,jdbcType=VARCHAR},
		detail=#{detail,jdbcType=VARCHAR}
		where
		type_id=#{typeId,jdbcType=INTEGER};
	</update>
	<!-- 删除某个Type -->
	<delete id="deleteSystemParamType" parameterType="int">
		delete from
		dwmis_mis_type
		where type_id=#{typeId,jdbcType=INTEGER};
	</delete>
	
	<!-- 删除Group内容 -->
	<delete id="deleteSystemParamTypeGroup" parameterType="int">
		delete from
		dwmis_mis_type
		where group_id=#{groupId,jdbcType=INTEGER};
	</delete>
	<!-- 删除Group节点 -->
	<delete id="deleteSystemParamTypeGroupNode" parameterType="int">
		delete from
		dwmis_mis_type
		where type_id=#{typeId,jdbcType=INTEGER} and group_id=0;
	</delete>
	
	<select id="getGroupName" parameterType="int" resultType="string">
	select type_name from dwmis_mis_type 
	where 
	type_id=#{typeId,jdbcType=INTEGER} and group_id=0;
	</select>
</mapper>